Build a complete, production-style AI Resume Analyzer web application using Python and Flask, designed to run on Replit.

Goal:
A web app where the user uploads a resume (PDF, DOCX or plain text) and optionally pastes a job description. The app uses the Perplexity API to analyze the resume against the job description and returns: an overall ATS compatibility score from 0–100, a skill match percentage, a list of matched and missing skills, section-wise feedback for Summary, Experience, Skills, and Projects, and a suggested improved resume summary. Results must be displayed in a clean, modern dashboard-style UI.

Tech and structure:
Use Python 3 and Flask. Create this structure:
- app.py  (Flask entry point)
- services/perplexity_client.py  (wrapper for Perplexity API)
- services/resume_parser.py      (PDF/DOCX/text extraction)
- templates/base.html            (layout)
- templates/index.html           (upload form + JD input)
- templates/results.html         (analysis results)
- static/css/styles.css          (custom styles)
- requirements.txt
- README.md

Perplexity API:
Use the Perplexity API for all AI analysis. Do not hardcode the API key; read it from environment variable PERPLEXITY_API_KEY (Replit Secrets). In services/perplexity_client.py, implement:

- analyze_resume_with_perplexity(resume_text: str, job_description: str) -> dict

It should call the Perplexity API using requests, sending a chat/completions-style payload with:
- A system message that instructs the model to respond only with strict JSON, no extra text.
- The resume_text and job_description as user content.
The JSON structure returned by the model must be parsed into a Python dict with keys:
{
  "overall_score": int,
  "skill_match_score": int,
  "matched_skills": [str],
  "missing_skills": [str],
  "feedback_summary": str,
  "section_feedback": {
    "summary": str,
    "experience": str,
    "skills": str,
    "projects": str
  },
  "improved_summary_example": str
}
Handle JSON parsing errors safely and raise/return a friendly error if the response is malformed.

Resume parsing:
In services/resume_parser.py, implement extract_text(file_storage) -> str that accepts a werkzeug FileStorage object from the Flask upload. Detect the file extension (pdf, docx, txt) and:
- For PDF, use pdfplumber (or similar) to extract text.
- For DOCX, use python-docx.
- For plain text, read directly.
Return cleaned plain text suitable for sending to the Perplexity API. Handle unsupported file types and empty/invalid files gracefully.

Flask app behavior (app.py):
- Route GET / : render index.html with:
  - File upload field named "resume_file"
  - Textarea for job description named "job_description"
  - Submit button “Analyze Resume”
- Route POST /analyze :
  - Validate that a file is uploaded.
  - Call extract_text on the uploaded file.
  - Get the job description from the form (can be empty but warn the user if missing).
  - Call analyze_resume_with_perplexity(resume_text, job_description).
  - Pass the resulting dict to results.html for rendering.
If any error occurs (resume parse failure, missing file, API error, invalid JSON), catch it and show a friendly error message on a simple error section in the page instead of crashing.

UI/UX:
Use Bootstrap 5 via CDN plus static/css/styles.css. base.html should include:
- A top navbar with the app name “AI Resume Analyzer”.
- A centered container.
- A footer with small text like “Powered by Perplexity API”.
index.html should show:
- A card with a title “Upload your resume”.
- A short paragraph explaining what the app does.
- A form with:
  - File input for resume_file.
  - Textarea for job_description.
  - Submit button.
results.html should display:
- Overall_score and skill_match_score as large badges or progress bars.
- A section for matched_skills as a bullet list.
- A section for missing_skills as a warning-styled list.
- Section-wise feedback grouped into Summary, Experience, Skills, Projects cards.
- A card showing improved_summary_example.
- A button “Analyze another resume” linking back to /.
Use spacing, cards, and shadows to keep the look clean and modern.

Dependencies (requirements.txt):
Include at least:
flask
requests
pdfplumber
python-docx

Add any others you use. The app must run out-of-the-box on Replit.

README.md:
Explain:
- What the app does.
- Features.
- Tech stack.
- How to run on Replit (set PERPLEXITY_API_KEY in Secrets, then click Run).
- Any limitations (API quotas, analysis quality depends on model, etc.).

Code quality:
Write clean, modular code with helpful comments. Use functions and separate concerns between app.py, perplexity_client.py, and resume_parser.py. Handle errors gracefully and never expose internal stack traces to the user.
